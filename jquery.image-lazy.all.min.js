!function(a){function b(a,b,c){for(var d,e=(" "+a.className+" ").replace(/[\t\r\n\f]/g," "),f=b.split(/ +/),g=f.length;g>=0;g--)d=f[g],d&&(e=c(e,d));e=e.replace(/^ +| +$/g,""),e!=a.className&&(a.className=e)}var c=a.ImagePreLoader=function(a,b){this.ele=a,this.opts=b||{}};c.defaults={loadingClass:"image-lazy-loading",successClass:"image-lazy-success",errorClass:"image-lazy-error"};var d={addClass:function(){function a(a,b){return a.indexOf(" "+b+" ")<0?a+b+" ":a}return function(c,d){b(c,d,a)}}(),removeClass:function(a,c){function d(a,b){for(;a.indexOf(" "+b+" ")>-1;)a=a.replace(" "+b+" ","");return a}return function(a,c){b(a,c,d)}}(),done:function(a){d.removeClass(a.ele,c.defaults.loadingClass),d.addClass(a.ele,c.defaults.successClass),a.ele.setAttribute("src",a.getUrl()),a.opts.done&&a.opts.done.call(a)},error:function(a){d.removeClass(a.ele,c.defaults.loadingClass),d.addClass(a.ele,c.defaults.errorClass),a.opts.error&&a.opts.error.call(a)}};c.prototype.getUrl=function(){return a.devicePixelRatio>1?this.ele.getAttribute("data-src-retina")||this.ele.getAttribute("data-src"):this.ele.getAttribute("data-src")},c.prototype.load=function(){d.addClass(this.ele,c.defaults.loadingClass);var a=new Image;a.src=this.getUrl();var b=this;return a.complete?void d.done.call(b,b):(a.onload=function(){d.done.call(b,b)},void(a.onerror=function(){d.error.call(b,b)}))}}(window),!function(a,b){b.fn.imageLazy=function(){function c(){var a=e.filter(function(){var a=b(this);if(!a.is(":hidden")){if(!a.hasClass(b.fn.imageLazy.defaults.scrollLazyClass))return!0;var c=d.scrollTop(),e=c+d.height(),f=a.offset().top,g=f+a.height();return g>=c&&e>=f}});e=e.not(a.trigger("download.imageLazy")),e.length||d.off("scroll.imageLazy resize.imageLazy")}var d=b(a),e=this;return this.one("download.imageLazy",function(){new ImagePreLoader(this).load()}),d.on("scroll.imageLazy resize.imageLazy",c),c(),this},b.fn.imageLazy.defaults={autoInit:!0,scrollLazyClass:"image-lazy-scroll"},b.fn.imageLazy.defaults.autoInit&&b(function(){b(".image-lazy").imageLazy()})}(window,window.jQuery);